
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Campeggio Santa Margherita</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .card {
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .logo {
            max-width: 120px;
        }
    </style>
</head>
<body class="container py-5">

    <div class="text-center mb-4">
        <img src="/static/logo.jpeg" alt="Logo" class="logo">
        <div class="mt-2 fw-bold fs-4 text-uppercase">Campeggio Santa Margherita</div>
    </div>

    <div class="card p-4 mb-5">
        <div class="section-title">üîç Filtra le risorse</div>
        <div class="row g-3 align-items-end">
            <div class="col-md-6">
                <label class="form-label">Data disponibile:</label>
                
<select id="data" class="form-control">
    <option value="24/04/2025" selected>24/04/2025</option><option value="25/04/2025" >25/04/2025</option><option value="26/04/2025" >26/04/2025</option><option value="27/04/2025" >27/04/2025</option><option value="28/04/2025" >28/04/2025</option><option value="29/04/2025" >29/04/2025</option><option value="30/04/2025" >30/04/2025</option><option value="01/05/2025" >01/05/2025</option><option value="02/05/2025" >02/05/2025</option><option value="03/05/2025" >03/05/2025</option><option value="04/05/2025" >04/05/2025</option><option value="05/05/2025" >05/05/2025</option><option value="06/05/2025" >06/05/2025</option><option value="07/05/2025" >07/05/2025</option><option value="08/05/2025" >08/05/2025</option><option value="09/05/2025" >09/05/2025</option><option value="10/05/2025" >10/05/2025</option><option value="11/05/2025" >11/05/2025</option><option value="12/05/2025" >12/05/2025</option><option value="13/05/2025" >13/05/2025</option><option value="14/05/2025" >14/05/2025</option><option value="15/05/2025" >15/05/2025</option><option value="16/05/2025" >16/05/2025</option><option value="17/05/2025" >17/05/2025</option><option value="18/05/2025" >18/05/2025</option><option value="19/05/2025" >19/05/2025</option><option value="20/05/2025" >20/05/2025</option><option value="21/05/2025" >21/05/2025</option><option value="22/05/2025" >22/05/2025</option><option value="23/05/2025" >23/05/2025</option>
</select>

            </div>
            <div class="col-md-6">
                <label class="form-label">Dimensione minima (m¬≤):</label>
                
<select id="dimensione" class="form-control">
    <option value="">-- Seleziona --</option>
    <option value="5,00",replace(",", ",")>5,00</option><option value="5,50",replace(",", ",")>5,50</option><option value="6,00",replace(",", ",")>6,00</option><option value="6,50",replace(",", ",")>6,50</option><option value="7,00",replace(",", ",")>7,00</option><option value="7,50",replace(",", ",")>7,50</option><option value="8,00",replace(",", ",")>8,00</option><option value="8,50",replace(",", ",")>8,50</option><option value="9,00",replace(",", ",")>9,00</option>
</select>

            </div>
            <div class="col-12 text-end mt-3">
                <button onclick="search()" class="btn btn-success">Cerca</button>
            </div>
        </div>
    </div>

    <div class="card p-4 mb-5">
        <div class="section-title">üìÑ Risultati</div>
        <div id="results"></div>
    </div>

    <div class="card p-4 mb-5">
        <div class="section-title">üì§ Carica i file Excel</div>
        <form id="form-disponibile" class="mb-3">
            <label class="form-label">File "Disponibile":</label>
            <input type="file" id="disponibile-file" class="form-control mb-2">
            <button type="submit" class="btn btn-primary">Carica Disponibile</button>
        </form>

        <form id="form-dimensione">
            <label class="form-label">File "Dimensione":</label>
            <input type="file" id="dimensione-file" class="form-control mb-2">
            <button type="submit" class="btn btn-primary">Carica Dimensione</button>
        </form>
    </div>

    <script>
    function search() {
        const data = document.getElementById('data').value;
        const dimensione = document.getElementById('dimensione').value;

        fetch(`/search?data=${encodeURIComponent(data)}&dimensione=${encodeURIComponent(dimensione)}`)
            .then(response => response.json())
            .then(data => {
                const resultsDiv = document.getElementById('results');
                if (data.length === 0) {
                    resultsDiv.innerHTML = '<div class="alert alert-warning">Nessun risultato trovato.</div>';
                    return;
                }

                let html = '<table class="table table-striped table-bordered"><thead><tr><th>Risorsa</th><th>Dimensione</th><th>Disponibile</th></tr></thead><tbody>';
                data.forEach(item => {
                    html += `<tr><td>${item.risorsa}</td><td>${item.dimensione}</td><td>${item.disponibile}</td></tr>`;
                });
                html += '</tbody></table>';
                resultsDiv.innerHTML = html;
            })
            .catch(err => {
                console.error('Errore durante la ricerca:', err);
                document.getElementById('results').innerHTML = '<div class="alert alert-danger">Errore durante la ricerca.</div>';
            });
    }
    </script>

</body>
</html>
